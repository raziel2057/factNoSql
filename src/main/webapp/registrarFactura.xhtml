<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <h:body>
        <ui:composition template="/plantillas/template.xhtml">

            <ui:define name="contenido">

                <div> <h2> Registrar nueva factura </h2> </div>

                <p:panel header="Cliente">
                    <h:panelGrid columns="2">
                        <p:outputLabel for="cedula" value="Cedula:" />
                        <p:inputText id="cedula" value="#{facturaBean.cedula}" 
                                     required="true" requiredMessage="Ingrese una cedula" />
                    </h:panelGrid>

                    <p:commandButton id="buscarCliente" value="Buscar persona" 
                                     actionListener="#{facturaBean.buscarPersona()}" update="@form" />
                </p:panel>

                <p:panel header="Datos persona seleccionada">
                    <h:panelGrid columns="4" rendered="#{not empty facturaBean.persona}">
                        <p:outputLabel value="Nombre:" style="font-weight:bold"/>
                        <p:outputLabel value="#{facturaBean.persona.nombre}" />
                        <p:outputLabel value="Cedula:" style="font-weight:bold"/>
                        <p:outputLabel value="#{facturaBean.persona.cedula}" />

                        <p:outputLabel value="Direccion:" style="font-weight:bold"/>
                        <p:outputLabel value="#{facturaBean.persona.direccion}" />
                        <p:outputLabel value="Telefono:" style="font-weight:bold"/>
                        <p:outputLabel value="#{facturaBean.persona.telefono}" />

                        <p:outputLabel value="Correo electrÃ³nico:" style="font-weight:bold"/>
                        <p:outputLabel value="#{facturaBean.persona.correoElectronico}" />
                        <p:outputLabel value="" />
                        <p:outputLabel value="" />
                    </h:panelGrid>
                </p:panel>

                <p:panel header="Productos" rendered="#{not empty facturaBean.persona}">
                    <h:panelGrid columns="4" >
                        <p:outputLabel for="codigo" value="Codigo producto:" />
                        <p:inputText id="codigo" value="#{facturaBean.codigo}" 
                                     required="true" requiredMessage="Ingrese un codigo" />
                        <p:outputLabel for="cantidad" value="Cantidad:" />
                        <p:inputText id="cantidad" value="#{facturaBean.cantidad}" 
                                     required="true" requiredMessage="Ingrese una cantidad" />
                    </h:panelGrid>

                    <h:panelGrid columns="2" >
                        <p:commandButton id="buscarProducto" value="Agregar producto" 
                                         actionListener="#{facturaBean.agregarProducto()}" update="@form" />
                        <p:spacer></p:spacer>
                        <p:outputLabel value="Total factura: " style="font-weight:bold" />
                        <p:outputLabel value="#{facturaBean.total}" />
                    </h:panelGrid>

                    <p:dataTable var="detalle" value="#{facturaBean.detalleFactura}" >                    
                        <p:column headerText="Codigo">
                            <h:outputText value="#{detalle.producto.codigo}" />
                        </p:column>

                        <p:column headerText="Nombre">
                            <h:outputText value="#{detalle.producto.nombre}" />
                        </p:column>

                        <p:column headerText="Precio">
                            <h:outputText value="#{detalle.producto.precio}" />
                        </p:column>

                        <p:column headerText="Cantidad">
                            <h:outputText value="#{detalle.cantidad}" />
                        </p:column>

                    </p:dataTable>
                    
                    <p:commandButton id="registrarFactura" value="Registar factura" 
                                     actionListener="#{facturaBean.registrarFactura()}" update="@form"/>
                </p:panel>

            </ui:define>
        </ui:composition>
    </h:body>
</html>
